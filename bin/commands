install_yaourt(){
	cd /tmp
	curl https://aur.archlinux.org/cgit/aur.git/snapshot/package-query.tar.gz -0 | tar -zx
	cd package-query
	makepkg -s --noconfirm
	sudo pacman -U package-query-*.pkg.tar.xz --noconfirm
	cd /tmp
	rm -rf /tmp/package-query
	curl https://aur.archlinux.org/cgit/aur.git/snapshot/yaourt.tar.gz -0 | tar -zx
	cd yaourt
	makepkg -s --noconfirm
	sudo pacman -U yaourt-*.pkg.tar.xz --noconfirm
	cd
	rm -rf /tmp/yaourt
}

update_mirrorlist(){
	sudo reflector --verbose -l 5 --sort rate --save /etc/pacman.d/mirrorlist
}

pacman_remove_orphan(){
	sudo pacman -Rns $(pacman -Qtdq)
}

git_sync(){
	g fetch --all -p --quiet
	g co --quiet --detach
	g fetch --quiet origin $1:$1
	g co --quiet -
}

#
# monitor stuff
#

1_monitor(){
	# disable all other monitors, just laptop now
	xrandr \
		--output eDP1 --mode 2560x1600 --pos 0x0 --rotate normal \
		--output DP2-8 --off \
		--output VIRTUAL1 --off \
		--output DP1 --off \
		--output DP2-1 --off \
		--output HDMI2 --off \
		--output HDMI1 --off \
		--output DP2 --off
}

2_monitor(){
	# when going to 2 monitors remove the scale so xranr can work
	unscale_monitor

	# enable all 2 monitors
	xrandr \
		--output DP2-8 --mode 3440x1440 --pos 0x0 --rotate normal \
		--output eDP1 --primary --mode 2560x1600 --pos 808x1440 --rotate normal \
		--output VIRTUAL1 --off \
		--output DP1 --off \
		--output DP2-1 --off \
		--output HDMI2 --off \
		--output HDMI1 --off \
		--output DP2 --off

	# scale laptop monitor back 65% because macbook monitor resolution is tiny
	scale_monitor
}

scale_monitor(){
	xrandr --output eDP1 --scale 0.65x0.65
}

unscale_monitor(){
	xrandr --output eDP1 --scale 1x1
}

gb_keyboard(){
	setxkbmap -layout gb
	localectl set-keymap --no-convert gb
}

br_keyboard(){
	setxkbmap -layout br
	localectl set-keymap --no-convert br
}

us_keyboard(){
	setxkbmap -layout us
	localectl set-keymap --no-convert us
}

prev() {
  PREV=$(fc -lrn | head -n 1)
  sh -c "pet new `printf %q "$PREV"`"
}

pet-select() {
  BUFFER=$(pet search --query "$READLINE_LINE")
  READLINE_LINE=$BUFFER
  READLINE_POINT=${#BUFFER}
}
bind -x '"\C-y": pet-select'

